<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Rodigy - A Fantasy Math Adventure!</title>
<style>
  body,html {
    margin: 0; 
    padding: 0; 
    font-family: "Trebuchet MS", sans-serif;
    background: #000;
    overflow: hidden;
  }

  /* Keyframes for animations */
  @keyframes floatCloud {
    0% {transform: translateX(0);}
    100% {transform: translateX(-2000px);}
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1);}
    50% { transform: scale(1.05);}
  }

  @keyframes shake {
    0% {transform: translateX(0);}
    20% {transform: translateX(-5px);}
    40% {transform: translateX(5px);}
    60% {transform: translateX(-5px);}
    80% {transform: translateX(5px);}
    100% {transform: translateX(0);}
  }

  @keyframes flashMessage {
    0% {opacity:0;}
    50% {opacity:1;}
    100% {opacity:0;}
  }

  @keyframes healthDrain {
    0% {width: var(--start-width);}
    100% {width: var(--end-width);}
  }

  @keyframes fadeIn {
    0% {opacity:0; transform: scale(0.9);}
    100% {opacity:1; transform: scale(1);}
  }

  @keyframes fadeOut {
    0% {opacity:1;}
    100% {opacity:0;transform: scale(0.9);}
  }

  @keyframes strike {
    0% {opacity:0; transform: translateY(-50px) scaleY(0.5);}
    50% {opacity:1; transform: translateY(0) scaleY(1);}
    100% {opacity:0; transform: translateY(50px) scaleY(0.5);}
  }

  /* Intro Screen */
  .intro-screen {
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    background: linear-gradient(#3a8fdd, #88eaff);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    color:#ffffff;
    text-align:center;
    z-index:1000;
    animation: fadeIn 1s ease forwards;
  }
  .intro-title {
    font-size: 60px;
    font-weight:bold;
    text-shadow:2px 2px 5px #003366;
    margin-bottom:20px;
  }
  .play-btn {
    padding: 15px 30px;
    font-size:24px;
    background:#00cc44;
    border:none;
    border-radius:10px;
    color:#ffffff;
    cursor:pointer;
    box-shadow:0 0 10px #009922;
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .play-btn:hover {
    transform: translateY(-3px);
    box-shadow:0 0 15px #00ff55;
  }

  /* Game Container */
  .game-container {
    position:relative;
    width:100vw;
    height:100vh;
    overflow:hidden;
    display:none; /* Hidden until start */
  }

  .header {
    position:absolute;
    top:0; left:0; right:0;
    height:60px;
    background: linear-gradient(to right, #55ccff, #88ddff, #bbffff);
    box-shadow:0 3px 6px rgba(0,0,0,0.2);
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 20px;
    z-index:10;
  }

  .logo {
    font-size:28px;
    font-weight:bold;
    color:#003366;
    letter-spacing:2px;
    text-shadow:1px 1px 2px #ffffff;
  }

  .player-info {
    font-size:18px;
    color:#003366;
    text-shadow:1px 1px 2px #ffffff;
  }

  /* BACKGROUND SCENE - Layered */
  .scene {
    position:absolute;
    top:60px; bottom:0; left:0; right:0;
    overflow:hidden;
    background: linear-gradient(#88eaff, #cceeff 30%, #ddffdd 60%, #aaffaa 100%);
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Layers: distant mountains, forest, grassland - use pseudo elements */
  .scene::before, .scene::after {
    content:"";
    position:absolute;
    width:300%;
    height:300%;
    top:50%; left:50%;
    transform:translate(-50%, -50%);
    pointer-events:none;
    z-index:-2;
  }

  .scene::before {
    background:radial-gradient(circle at 50% 70%, #ffffff, #cceeff, #99ddff 30%, #66bbff 50%, #4488cc 80%);
    opacity:0.5;
  }

  .scene::after {
    background:radial-gradient(circle at 50% 50%, #bbffaa 0%, #66dd88 30%, #44aa66 60%, #226644 90%);
    mix-blend-mode: multiply;
    opacity:0.4;
  }

  /* Add moving clouds */
  .clouds {
    position:absolute;
    top:0; left:0; right:0; height:200px;
    overflow:hidden;
    z-index:-1;
  }

  .clouds .cloud {
    position:absolute;
    top:50px;
    width:300px; height:100px;
    background:#ffffff;
    border-radius:50%;
    filter: blur(10px) brightness(110%);
    animation: floatCloud 60s linear infinite;
  }
  /* multiple clouds */
  .cloud:nth-child(1) {
    left:100%; top:20px;
  }
  .cloud:nth-child(2) {
    left:120%; top:80px; width:200px; height:60px;
    animation-duration:50s;
  }
  .cloud:nth-child(3) {
    left:130%; top:40px; width:250px; height:80px;
    animation-duration:70s;
  }

  /* Battle Container */
  .battle-container {
    width:90%;
    max-width:1000px;
    height:70%;
    max-height:600px;
    background: linear-gradient(#ffffee, #ddffee);
    border:5px solid #006633;
    border-radius:20px;
    box-shadow:0 0 15px #006600;
    display:flex;
    align-items:center;
    justify-content:space-around;
    position:relative;
    z-index:5;
    animation: fadeIn 1s ease forwards;
  }

  .hero, .enemy {
    width:40%;
    height:80%;
    background: #ffffffaa;
    border:3px solid #005500;
    border-radius:20px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-end;
    padding-bottom:20px;
    position:relative;
    box-shadow:inset 0 0 10px #005500;
    backdrop-filter:blur(5px);
  }

  .hero {
    box-shadow:0 0 10px #00aa00, inset 0 0 10px #005500;
  }

  .enemy {
    box-shadow:0 0 10px #aa0000, inset 0 0 10px #550000;
  }

  .hero .sprite, .enemy .sprite {
    width:120px; height:120px;
    background: radial-gradient(circle, #ffcc66, #ffaa00);
    border:3px solid #aa6600;
    border-radius:50%;
    margin-bottom:20px;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:60px;
    animation: pulse 2s infinite;
  }

  .hero .sprite {
    background: radial-gradient(circle at 50% 30%, #ffffaa, #ffcc66);
    border-color:#cc8800;
    text-shadow:2px 2px 5px #ffffaa;
  }

  .enemy .sprite {
    background: radial-gradient(circle at 50% 30%, #ff9999, #ff5555);
    border-color:#aa0000;
    text-shadow:2px 2px 5px #ff9999;
  }

  .hero .sprite::before {
    content:"ü§†";
  }

  .enemy .sprite::before {
    content:"üëπ";
  }

  .name {
    font-size:22px;
    font-weight:bold;
    color:#003300;
    margin-bottom:10px;
    text-shadow:1px 1px 2px #ffffff;
  }

  .enemy .name {
    color:#660000;
  }

  .health-bar {
    width:80%;
    height:20px;
    background:#eeeeee;
    border:2px solid #333333;
    border-radius:10px;
    position:absolute;
    top:10px; left:50%;
    transform:translateX(-50%);
    overflow:hidden;
  }

  .health-bar-inner {
    height:100%;
    background: linear-gradient(to right, #00dd00, #00aa00);
    transition:width 0.5s ease;
  }

  .enemy .health-bar-inner {
    background: linear-gradient(to right, #dd0000, #aa0000);
  }

  /* Math Box */
  .math-box {
    position:absolute;
    bottom:10px;
    left:50%;
    transform:translateX(-50%);
    background:#ffffffcc;
    border:2px solid #005500;
    border-radius:10px;
    padding:10px;
    text-align:center;
    box-shadow:0 0 10px #005500;
    width:300px;
  }

  .math-box p {
    margin:5px 0;
    font-size:18px;
    color:#003300;
  }

  .math-box .answer-input {
    width:80px;
    padding:5px;
    border:2px solid #005500;
    border-radius:5px;
    font-size:16px;
    text-align:center;
    margin:5px;
  }

  .math-box .attack-btn {
    padding:8px 12px;
    background:#00cc44;
    border:none;
    border-radius:5px;
    color:#ffffff;
    font-size:16px;
    cursor:pointer;
    font-weight:bold;
  }
  .math-box .attack-btn:hover {
    background:#009933;
  }

  /* Message Box */
  .message-box {
    position:absolute;
    top:20px;
    width:80%;
    left:50%;
    transform:translateX(-50%);
    background:#ffffffdd;
    border:2px solid #006600;
    border-radius:10px;
    padding:10px;
    text-align:center;
    font-size:18px;
    color:#003300;
    display:none;
    z-index:10;
  }

  .victory {
    font-size:32px;
    color:#009900;
    font-weight:bold;
    text-shadow:1px 1px 2px #ffffff;
  }

  .defeat {
    font-size:32px;
    color:#990000;
    font-weight:bold;
    text-shadow:1px 1px 2px #ffffff;
  }

  .restart-btn {
    margin-top:10px;
    padding:10px 20px;
    background:#3333aa;
    color:#ffffff;
    font-size:20px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    box-shadow:0 0 10px #0000aa;
  }
  .restart-btn:hover {
    background:#000099;
  }

  /* Attack effect */
  .attack-effect {
    position:absolute;
    left:50%; top:50%;
    transform:translate(-50%,-50%);
    width:50px; height:150px;
    background: linear-gradient(#ffff88, #ffaa00);
    border:2px solid #aa6600;
    border-radius:10px;
    box-shadow:0 0 20px #ffee00, 0 0 5px #ffcc00 inset;
    animation: strike 1s ease forwards;
    display:none;
  }

  /* Responsive adjustments */
  @media(max-width:600px) {
    .battle-container {
      flex-direction:column;
      height:80%;
    }
    .hero, .enemy {
      width:80%;
      height:40%;
    }
  }
</style>
</head>
<body>
<div class="intro-screen">
  <div class="intro-title">Rodigy üòÇüî•</div>
  <p style="font-size:20px;">A Magical Math Adventure Awaits, Calder! üòÇ</p>
  <button class="play-btn">Play Now!</button>
</div>

<div class="game-container">
  <div class="header">
    <div class="logo">Rodigy</div>
    <div class="player-info">Player: Calder! üòÇ Level: 1 ‚öîÔ∏è</div>
  </div>
  <div class="scene">
    <div class="clouds">
      <div class="cloud"></div>
      <div class="cloud"></div>
      <div class="cloud"></div>
    </div>
    <div class="battle-container">
      <div class="hero">
        <div class="name">Calder The Brave üòÇ</div>
        <div class="sprite"></div>
        <div class="health-bar hero-health-bar">
          <div class="health-bar-inner hero-health" style="width:100%;"></div>
        </div>
      </div>
      <div class="enemy">
        <div class="name">Goblin Grump üòÇ</div>
        <div class="sprite"></div>
        <div class="health-bar enemy-health-bar">
          <div class="health-bar-inner enemy-health" style="width:100%;"></div>
        </div>
      </div>
      <div class="math-box">
        <p>Answer this to attack! üòÇ</p>
        <p class="question"></p>
        <input type="number" class="answer-input" placeholder="Your answer"/>
        <button class="attack-btn">Attack!</button>
      </div>
      <div class="message-box"></div>
      <div class="attack-effect"></div>
    </div>
  </div>
</div>

<script>
  (function(){
    const introScreen = document.querySelector('.intro-screen');
    const playBtn = document.querySelector('.play-btn');
    const gameContainer = document.querySelector('.game-container');

    const questionEl = document.querySelector('.question');
    const answerInput = document.querySelector('.answer-input');
    const attackBtn = document.querySelector('.attack-btn');
    const messageBox = document.querySelector('.message-box');

    const heroHealthBar = document.querySelector('.hero-health');
    const enemyHealthBar = document.querySelector('.enemy-health');

    const attackEffect = document.querySelector('.attack-effect');

    let heroHealth = 100;
    let enemyHealth = 100;
    let currentQuestion = generateQuestion();
    let gameActive = true;

    playBtn.addEventListener('click', () => {
      introScreen.style.display='none';
      gameContainer.style.display='block';
    });

    function generateQuestion() {
      const num1 = Math.floor(Math.random()*10)+1;
      const num2 = Math.floor(Math.random()*10)+1;
      const op = Math.random()>0.5?'+':'-';
      questionEl.textContent = `${num1} ${op} ${num2} = ?`;
      return {num1, num2, op};
    }

    function checkAnswer() {
      const val = parseInt(answerInput.value,10);
      if(isNaN(val)) return false;
      const correct = currentQuestion.op==='+' ? (currentQuestion.num1+currentQuestion.num2) : (currentQuestion.num1 - currentQuestion.num2);
      return val===correct;
    }

    function updateHealthBars() {
      heroHealthBar.style.width = heroHealth+'%';
      enemyHealthBar.style.width = enemyHealth+'%';
    }

    function heroAttack() {
      // hero attacks enemy
      enemyHealth -= Math.floor(Math.random()*20)+10; // 10-29 damage
      if(enemyHealth<0) enemyHealth=0;
      animateAttackEffect('enemy');
      setTimeout(updateHealthBars, 500);
      setTimeout(checkEndGame, 800);
    }

    function enemyAttack() {
      // enemy attacks hero
      heroHealth -= Math.floor(Math.random()*15)+5; // 5-19 damage
      if(heroHealth<0) heroHealth=0;
      animateAttackEffect('hero');
      setTimeout(updateHealthBars,500);
      setTimeout(checkEndGame,800);
    }

    function animateAttackEffect(target) {
      attackEffect.style.display='block';
      let startLeft = target==='enemy'? '30%' : '70%';
      attackEffect.style.left = startLeft;
      attackEffect.style.top = '50%';
      attackEffect.style.animation='strike 1s ease forwards';
      attackEffect.addEventListener('animationend', ()=>{
        attackEffect.style.display='none';
      }, {once:true});
    }

    function checkEndGame() {
      if(enemyHealth<=0) {
        showMessage("You defeated the Goblin Grump! üòÇ", "victory");
        gameActive=false;
      } else if(heroHealth<=0) {
        showMessage("You were defeated by the Goblin Grump... üò¢", "defeat");
        gameActive=false;
      } else {
        // continue battle
      }
    }

    function showMessage(msg, type) {
      messageBox.style.display='block';
      messageBox.innerHTML = `<div class="${type}">${msg}</div><button class="restart-btn">Play Again</button>`;
      const restartBtn = messageBox.querySelector('.restart-btn');
      restartBtn.addEventListener('click', ()=>{
        location.reload();
      });
    }

    attackBtn.addEventListener('click', ()=>{
      if(!gameActive) return;
      if(checkAnswer()){
        // Correct: hero attacks enemy
        heroAttack();
      } else {
        // Incorrect: enemy attacks hero
        enemyAttack();
      }
      answerInput.value='';
      currentQuestion=generateQuestion();
    });

  })();
</script>
</body>
</html>
